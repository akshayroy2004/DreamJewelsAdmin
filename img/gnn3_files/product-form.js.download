/** Shopify CDN: Minification failed

Line 16:73 Transforming class syntax to the configured target environment ("es5") is not supported yet
Line 16:110 Transforming object literal extensions to the configured target environment ("es5") is not supported yet
Line 16:901 Transforming object literal extensions to the configured target environment ("es5") is not supported yet
Line 16:904 Transforming const to the configured target environment ("es5") is not supported yet
Line 16:1043 Transforming const to the configured target environment ("es5") is not supported yet
Line 16:1678 Transforming object literal extensions to the configured target environment ("es5") is not supported yet
Line 16:1681 Transforming const to the configured target environment ("es5") is not supported yet
Line 16:1697 Transforming const to the configured target environment ("es5") is not supported yet
Line 16:1843 Transforming const to the configured target environment ("es5") is not supported yet
Line 16:2172 Transforming const to the configured target environment ("es5") is not supported yet
... and 27 more hidden warnings

**/
customElements.get("product-form")||customElements.define("product-form",class extends HTMLElement{constructor(){super(),this.form=this.querySelector("form"),this.form.querySelector("[name=id]").disabled=!1,this.form.addEventListener("submit",this.onSubmitHandler.bind(this)),this.cart=document.querySelector("cart-notification")||document.querySelector("cart-drawer"),this.submitButton=this.querySelector('[type="submit"]'),this.buyButton=this.querySelector('[id^="ProductBuyButton-"]'),this.buyButton&&(document.querySelector("cart-drawer")&&this.submitButton.setAttribute("aria-haspopup","dialog"),this.hideErrors="true"===this.dataset.hideErrors),this.setPersonalisedListeners(),this.setPhotoframeListener(),this.goldChainAddOns=document.querySelectorAll('[id^="addons_"]'),this.goldChainAddOns.forEach(t=>{t.addEventListener("click",this.goldChainAddOnsHandler.bind(this))})}setPhotoframeListener(){const t=document.querySelector("#photoFrameImg"),e=document.querySelector(".photo"),s=document.querySelector(".frame");t&&(t.onchange=()=>{const r=t.files[0],o=new Image;o.onload=()=>{o.width>o.height?(e.classList.remove("photo-portrait"),e.classList.add("photo-landscape"),s.classList.remove("frame-cover-portrait"),s.classList.add("frame-cover-landscape")):(e.classList.add("photo-portrait"),e.classList.remove("photo-landscape"),s.classList.remove("frame-cover-landscape"),s.classList.add("frame-cover-portrait"))},o.src=URL.createObjectURL(r),document.querySelector("#uploadedPf").src=o.src,document.querySelectorAll(".noPreviewPf").forEach(t=>t.style.display="none"),document.querySelectorAll(".previewPf").forEach(t=>t.style.display="block")})}setPersonalisedListeners(){const t=(e,s)=>{const r=window.innerWidth<740?13:35,o=document.querySelector("div#outer"),i=document.querySelector("div#outer div");s&&(i.style.fontSize="100px");const a=window.getComputedStyle(i,null).getPropertyValue("font-size");i.style.fontSize=parseFloat(a)-.3+"px",i.clientHeight>=o.clientHeight+window.innerWidth/r*e&&t(e,!1),i.clientWidth>=o.clientWidth+window.innerWidth/r*e&&t(e,!1)};this.letterInputs=this.querySelectorAll(".personalised-input"),this.letterInputs.forEach((e,s)=>{const r=e.querySelector("input"),o=e.querySelector("#leftchars"),i=e.dataset.max,a=e.dataset.caps,n="letters"+(s>0?s+1:""),d=document.getElementById(n),c="allowSpace"in e.dataset&&"true"===e.dataset.allowSpace,l="resize"in e.dataset&&"true"===e.dataset.resize,u="hindi"in e.dataset&&"true"===e.dataset.hindi;let h;r.addEventListener("input",async s=>{let r=s.target.value;r.length>i&&(r=r.slice(0,i));let n=0,m="";for(const t of r)t>="A"&&t<="Z"&&n<a&&(m+=t,n++),t>="a"&&t<="z"&&(m+=t)," "===t&&c&&(m+=t);s.target.value=m,o&&(o.innerHTML=`${i-m.length}/${i}`,o.style.color=i===m.length?"red":"#7D7D7D"),d&&(u?(clearTimeout(h),h=setTimeout(async()=>{if(m.length>0){const t=await fetch(`https://api.giva.co/getHindi?text=${m.toUpperCase()}%20`),e=await t.json();d.innerHTML=e.data}else d.innerHTML=m},500)):d.innerHTML=m),l&&t(e.dataset.divider&&"true"===e.dataset.divider?1:0,!0)})})}async moveToWishlist(){const t=(await fetch(routes.cart_url+".js").then(t=>t.json())).items;t.length>0&&(window.SwymCallbacks=window.SwymCallbacks||[],window.SwymCallbacks.push((function(e){t.filter(t=>!t.sku.startsWith("GW")).forEach(t=>{const s=e.platform.transformCartItem(t);e.addToWishList(s,()=>{console.log(t.sku,"added to wishlist")})})})),await fetch("/cart/clear.js",{method:"POST"}))}async onSubmitHandler(t){const e=!!t.submitter.id.startsWith("ProductBuyButton-");if(t&&"function"==typeof t.preventDefault&&t.preventDefault(),"true"===this.submitButton.getAttribute("aria-disabled"))return;this.handleErrorMessage(),this.submitButton.setAttribute("aria-disabled",!0),e||this.submitButton.classList.add("loading"),this.buyButton&&(this.buyButton.setAttribute("aria-disabled",!0),e&&this.buyButton.classList.add("loading"));const s=e?this.buyButton?this.buyButton.querySelector(".loading-overlay__spinner"):null:this.submitButton.querySelector(".loading-overlay__spinner");s&&s.classList.remove("hidden");const r=fetchConfig("javascript");r.headers["X-Requested-With"]="XMLHttpRequest",delete r.headers["Content-Type"];const o=new FormData(this.form);this.cart&&(o.append("sections",this.cart.getSectionsToRender().map(t=>t.id)),o.append("sections_url",window.location.pathname),this.cart.setActiveElement(document.activeElement)),r.body=o;const i=o.has("properties[_giftWrap]")&&"yes"===o.get("properties[_giftWrap]"),a=Array.from(this.goldChainAddOns).filter(t=>t.checked)[0];let n=document.getElementById("box_addons")?.checked||"";e&&await this.moveToWishlist(),fetch(""+routes.cart_add_url,r).then(t=>t.json()).then(async t=>{if(i&&await fetch("/cart/add.js",{method:"POST",body:JSON.stringify({items:[{id:31471233106010,quantity:1}]}),headers:{"Content-Type":"application/json"}}).then(t=>t.json()),a){const t=document.getElementById("productId-"+a.id).value;await fetch("/cart/add.js",{method:"POST",body:JSON.stringify({items:[{id:t,quantity:1}]}),headers:{"Content-Type":"application/json"}}).then(t=>t.json())}if(n){const t=document.getElementById("boxId-addons").value;await fetch("/cart/add.js",{method:"POST",body:JSON.stringify({items:[{id:t,quantity:1}]}),headers:{"Content-Type":"application/json"}}).then(t=>t.json())}if(t.status){publish(PUB_SUB_EVENTS.cartError,{source:"product-form",productVariantId:o.get("id"),errors:t.errors||t.description,message:t.message}),this.handleErrorMessage(t.description);const e=this.submitButton.querySelector(".sold-out-message");if(!e)return;return this.submitButton.setAttribute("aria-disabled",!0),this.submitButton.querySelector("span").classList.add("hidden"),e.classList.remove("hidden"),void(this.error=!0)}if(!this.cart)return void(window.location=window.routes.cart_url);e&&(window.location="/checkout"),this.error||publish(PUB_SUB_EVENTS.cartUpdate,{source:"product-form",productVariantId:o.get("id"),cartData:t}),this.error=!1;const s=this.closest("quick-add-modal");s?(document.body.addEventListener("modalClosed",()=>{setTimeout(()=>{this.cart.renderContents(t)})},{once:!0}),s.hide(!0)):e||window.location.pathname===window.routes.cart_url||this.cart.renderContents(t),this.submitButton.innerHTML="Added to Cart"}).catch(t=>{console.error(t)}).finally(()=>{e||(this.submitButton.classList.remove("loading"),this.buyButton&&this.buyButton.classList.remove("loading")),this.cart&&this.cart.classList.contains("is-empty")&&this.cart.classList.remove("is-empty"),this.error||e||(this.submitButton.removeAttribute("aria-disabled"),this.buyButton&&this.buyButton.removeAttribute("aria-disabled")),!e&&s&&s.classList.add("hidden")})}handleErrorMessage(t=!1){this.hideErrors||(this.errorMessageWrapper=this.errorMessageWrapper||this.querySelector(".product-form__error-message-wrapper"),this.errorMessageWrapper&&(this.errorMessage=this.errorMessage||this.errorMessageWrapper.querySelector(".product-form__error-message"),this.errorMessageWrapper.toggleAttribute("hidden",!t),t&&(this.errorMessage.textContent=t)))}goldChainAddOnsHandler(t){let e=t.target;this.goldChainAddOns.forEach(s=>{s.checked&&s!==t.target&&(t.target.checked=!1,document.querySelector(".addon_error_box").style.display="flex",setTimeout(()=>{document.querySelector(".addon_error_box").style.display="none"},3e3),e=s)})}});